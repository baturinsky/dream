(()=>{function $([t,e,n,o]){return`rgba(${t*255},${e*255},${n*255},${o})`}function b(t,e,n=1){return t.map((o,r)=>o+e[r]*n)}function re(t,e=1){return t.map((n,o)=>n*e)}function at(t,e){return b(t,e,-1)}function Je(t){return t.reduce((e,n)=>e+n*n,0)**.5}function st(t,e){return Je(at(e,t))}var vt=2**31,u=Ue(123);function Ue(t=0){0<t&&t<1&&(t=~~(t*vt));let e=n=>(t=t*16807%2147483647)%n;return u=n=>n==-1?t:n==null?e(vt)/vt:e(n),u}function R(t,e=u){if(!t)return null;let n=e(t.length);return t[n]}function lt(t,e=u){let n=St(t),o=e()*n-t[0],r=0;for(;o>=0;)o-=t[++r];return r}function ie(t,e,n=u){let o=t.map(e),r=lt(o);return t[r]}function X(t,e=o=>o,n=u){let o=lt(Object.values(t).map(e),n);return Object.keys(t)[o]}function St(t){return t.reduce((e,n)=>e- -n,0)}function z(t=u){let e="";for(let n=0;n<t(3)+2;n++)e+=R([..."kstnhmyrw",""],t)+R([..."aiueo",""],t);return tn(e)}function tn(t){return t?t[0].toUpperCase()+t.substring(1):""}function G(t){for(let e of Object.values(t))for(let n in e){let o=Number(e[n]);!isNaN(o)&&n!="colors"&&(e[n]=o)}return t}function ae(t,e=u){return t=t*100,t=(t%1>e()?1:0)+~~t,t/=100}var E=G(Object.fromEntries(`Health:So called Hit Points:31
Strength:Dealing Damage:fg
Resilience:Damage reduction:qp
Greed:Find More:c4
Bloom:Regeneration:ba
Courage:Cover your allies:21
Anger:Avenge Damage:uv
Mercy:Heal Friends:lx
Knowledge:Writing and Reading:mn
Light:Strike True:je
Dark:Avoid Damage:o8
Time:Attack Rate:lm
Purity:Resist Poison:rq
Venom:Poison:ba`.split(`
`).map((t,e)=>{let[n,o,r]=t.split(":"),l=n[0];return[l,{l,name:n,tip:o,colors:r,ind:e}]}))),P=G(Object.fromEntries(`Wooden:67:H:10
Iron:32:S:10
Stone:mn:R:10
Golden:c4:G:2
Plant:ba:B:5
Leather:56:C:5
Bone:ji:A:5
Cloth:tv:M:10
Paper:kl:K:5
Glass:wr:L:5
Obsidian:no:D:2
Copper:ef:T:5
Silver:lx:P:3
Asbestos:kb:V:1`.split(`
`).map(t=>{let[e,n,o,r]=t.split(":");return[e,{colors:n,aspects:ct(o),chance:r}]}))),k=G(Object.fromEntries(`Door:2:10:Wooden:0:1:
Bed:2:H:Wooden:10:.5
Column:3:R:Stone:0:1:
Apple:1:B:Plant:10:1:
Chair:2:H:Wooden:10:1:
Chest:1:G:Wooden:10:1:
Shelf:2:G:Wooden:0:1:
Stand:2::Stone:0:1:
Display:2::Glass:0:1:
Plaque:2::Iron:0:1:
Big Table:2:R:Stone:0:1:
Display:2::Glass:0:1:
Dial:2::Glass:0:1:
Table:2::Wooden:10:.5:
Clock:1:T:Golden:1:1:
Pedestal:1::Wooden::1:
Mirror:2::Glass:5:1:
Angel:2:P:Silver:3:1:
Press:2::Iron:0:1:
Brush:2::Cloth:0:1:
Wine:1:A:Plant:5:1:`.split(`
`).map((t,e)=>{let[n,o,r,l,i,s]=t.split(":");return[n,{name:n,scale:o,aspects:ct(r),material:l,chance:i,ind:e,placeh:s}]}))),pt=G(Object.fromEntries(`Human:G
Elf:B
Cat:D
Ogre:M
Fairy
Bird
Rat
Raven
Skel
Imp
Dog
Hippo
Lizard
Drago
Alien
Hare`.split(`
`).map((t,e)=>{let[n,o]=t.split(":");return[n,{name:n,aspects:ct(o),ind:e,chance:1/(10+e)}]}))),se={...pt,...k};function ct(t=""){let e={};return[...t].forEach(n=>e[n]=(e[n]||0)+1),e}function Tt(t,e,n=1){let o={};t??={},e??={};for(let r in{...t,...e})o[r]=(t[r]||0)+(e[r]||0)*n;return o}function le(t){let e="";for(let n of Object.keys(E).sort((o,r)=>t[o]-t[r]))t[n]>0&&(e+=`<div class="aspect" data-aspect=${n}><span class=num>${t[n].toFixed(2).replace(/(.00)/g,"")}<span> ${E[n].name}</div>`);return e}function Ct(t){return St(Object.values(t))}var g=64,O=5,d=3,c=128,m=256,D=8,At=O*d,v=[...new Array(At)].map((t,e)=>({id:e})),Lt=0;function Pt(t){return t&&{...pe(t),chest:Pt(t.chest),held:t.held?.map(e=>Pt(e))}}var en="id,name,kind,pos,scale,right,shape,colors,aspects,type,material,explored,level,dream,combat".split(",");function pe(t){return Object.fromEntries(en.map(e=>[e,t[e]]))}function wt(t){if(!t)return null;let e=y({...fe[t.kind],...pe(t),chest:wt(t.chest)});return t.held?.forEach(n=>{W(e,wt(n),n.pos)}),e}function ce(){return{cur:a.id,lid:Lt,rooms:v,all:Object.values(x).filter(t=>!t.parent&&t.kind!=4).map(t=>Pt(t))}}function me(t){Object.values(x).forEach(e=>N(e)),t.all.forEach(e=>wt(e)),q(x[t.cur]),Lt=t.lid,v=t.rooms;for(let e of v)e.dream&&(mt(e.id,!0),K(e.id))}function ue(){return++Lt}var Mt=(t,e,n)=>nn(an(n,t),e),F=(t,e)=>Mt("S",t,e),ye=(t,e)=>Mt("T",t,e),ut=(t,e)=>Mt("O",t,e);function nn(t,e){if(!t)debugger;if(!e)return t;let n=t.cloneNode();return f(n).filter=sn(e),f(n).drawImage(t,0,0),n}var Q=32,on=48,rn=64;var ft=144,be=rn,xe=on,de=16;function an(t,e,n=0){e=="O"&&(n=1);let o=V(D+n*2);return o.id=e+t,f(o).filter=`url(#_${e})`,f(o).drawImage(img,t%de*D,~~(t/de)*D,D,D,n,n,D,D),o}function f(t){return t.getContext("2d")}function sn(t){if(!Dt.has(t)){Dt.add(t);let[e,n]=[...t].map(r=>C[Number.parseInt(r,36)]),o=`<filter id=f${t}><feColorMatrix type=matrix values="${e[0]} ${n[0]} 0 0 0  ${e[1]} ${n[1]} 0 0 0  ${e[2]} ${n[2]} 0 0 0  0 0 0 1 0" /></filter>`;DEFS.innerHTML+=o}return`url(#f${t})`}function V(t,e=t){let n=document.createElement("canvas");return n.classList.add("sprite"),n.width=t,n.height=e,n}var H=t=>f(t).createPattern(t,"repeat");function ge(t,e,n){let o=document.createElement("div");o.classList.add("ftext"),o.classList.add(n),o.innerHTML=`<div>${t}</div>`,Scene.appendChild(o),setTimeout(()=>Scene.removeChild(o),3e3),$t(o,e)}function $t(t,e,n=""){t.style.left=`${e[0]}px`,t.style.top=`${e[2]}px`,t.style.transform=`translateZ(${e[1]}px) `+n}function _(t,e){let n=f(t);n.fillStyle=e,n.fillRect(0,0,t.width,t.height)}function J(t,e,n,o=1){return t.width=e*o,t.height=n*o,t.style.width=`${e}px`,t.style.height=`${n}px`,t}function ln(t){return[~~(t/d),t%d]}function he(t){let[e,n]=ln(t),o=dt(`ca${t}`,"floor,carpet",{top:`${++n*c}px`,left:`${e*m}px`});return J(o,m,g,2),o}function dt(t,e,n,o="canvas"){let r=document.createElement(o);return r.id=t,r.classList.add(...e.split(",")),Object.assign(r.style,n),Scene.appendChild(r),r}function Ee(t,e){let n=t.cloneNode();return n.width*=e,n.height*=e,f(n).scale(e,e),f(n).imageSmoothingEnabled=!1,f(n).drawImage(t,0,0),n}function mt(t,e){v[t].dream=e;let n=Z(t);for(let o of n)w(o,[]),Nt(o,""),o.dream&&!e&&N(o),!o.dream&&o.kind!=1&&(o.div.style.display=e?"none":"block")}function yt(t){let e=h(t.pos);mt(e,!0);let n=v[e];n.aspects=t.aspects,n.level=t.level,pn(e),cn(e),K(e)}function Ht(t){mt(t,!1)}function pn(t){for(let e=0;e<3;e++)y({...Y,level:1,colors:"nm",type:Pe(),name:z(),chest:tt(Q+2,"lk"),pos:B(t),dream:!0})}function cn(t){for(let e of[!0,!1]){let n=Ot(t,e),o=Xt(t);o[0]+=(e?.3:.7)*m,n.forEach((r,l)=>{r.pos=b(o,[0,(l+.5)*g/n.length,0]),r.right=e,r.combat={pos:r.pos,hp:It(r),delay:Rt(r),aggro:0},Ft(r),U(r)})}}function It(t){return~~((1+et(t,"H")+t.level*.2)*10)}function Rt(t){return~~(3e3/(1+et(t,"T")+t.level*.1+u()))}function mn(t){return(1+et(t,"S")+t.level*.1)*3}function Se(t,e){w(e,Te(e));let n=~~mn(t);e.combat.hp-=n,ge(`${n}`,b(e.pos,[-5+u(10),0,-35]),"red"),Ft(e)}function K(t){if(!v[t].dream)return;let e=Ot(t).filter(i=>i.combat.hp>0),n=Math.min(...e.map(i=>i.combat.delay)),o=()=>{for(let i of e)i.combat.delay-=n},r=e.find(i=>i.combat.delay==n);if(!r)return ve(t);let l=ie(e,i=>i.dream==r.dream?0:1+et(i,"C"));if(!l)return ve(t);w(r,Ce(r,l,o))}function ve(t){Ht(t)}var un="scaleX(-1) translateX(-100%)";var Y={bitPos:[[3,1],[2,14],[2,10],[2,13]],mountPoint:[0,0,16],size:[16,24],origin:"75% 50%",kind:1,makeBits:t=>[[t.shape,t.colors],[be,t.colors],yn(t.chest),[xe,t.colors]]},ot={bitPos:[[0,0]],size:[10,10],kind:3,makeBits:t=>t&&[[t.shape,t.colors]]},Bt={...ot,mountPoint:[5,0,0],kind:2},A={...ot,kind:4},fe=[,Y,Bt,ot,A],we=1,bt=2,Yt=3;function I(t,e,n){let o=t.pos,r=Date.now(),{stopDistance:l,mode:i}=n||{};i??=we;let s=i==bt?.3:.1,p=st(t.pos,e)/s,j=e[0]-t.pos[0];j!=0&&i==we&&(t.right=j>0);let _e=at(e,o);return()=>{let ee=Date.now(),ne=Math.min(ee-r,p);t.pos=b(o,_e,p?ne/p:1);let oe=ne>=p||st(t.pos,e)<(l??0);return t.transform=oe?"":`rotateZ(${i==bt?-10:i==Yt?10:Math.sin(ee/100)*5}deg)`,!oe}}function fn(t){return t.right?1:-1}function M(t,e,n=0){let o=h(t.pos),r=h(e);return r==o?[()=>I(t,e,{stopDistance:n})]:[()=>I(t,B(o)),()=>t.pos=b(B(r),[5,0,0]),()=>I(t,e,{stopDistance:n})]}function Zt(t){let e=Date.now();return()=>Date.now()<e+t}function Te(t){return[()=>I(t,b(t.combat.pos,[fn(t)*-20,0,0]),{mode:Yt}),()=>I(t,t.combat.pos,{mode:Yt})]}function Ce(t,e,n=()=>{}){return[()=>I(t,e.combat.pos,{mode:bt}),()=>{Se(t,e),n()},()=>I(t,t.combat.pos,{mode:bt}),()=>{t.combat.delay=Rt(t),K(h(t.pos))}]}function xt(t){return[t.size[0]*t.scale,t.size[1]*t.scale]}function U(t){!t||(gt(t),S(t))}function S(t,e){if(!t)return;if(!t.animation&&t.actionsQueue){let l=t.actionsQueue.shift();if(l){let i=l();i instanceof Function&&(t.animation=i)}}t.animation&&t.animation()==!1&&delete t.animation;let n=t.div,o=e?b(t.pos,e):t.pos,r=at(o,dn(t));n.style.opacity=t.opacity,n.classList.toggle("current",t==a),n.classList.add("k"+t.kind),n.classList.toggle("right",t.right),$t(n,r,(t.right?un:"")+(t.transform??""))}function dn(t){return[xt(t)[0]/2,0,xt(t)[1]]}function jt(t){let e=V(1),n=document.createElement("div");return n.classList.add("entity"),n.appendChild(e),n.style.position="absolute",e.id="s"+t.id,t.canvas=e,t.div=n,t.kind==1&&(t.title=document.createElement("div"),t.title.classList.add("etitle"),n.appendChild(t.title)),gt(t),e}function yn(t){return t&&[t.shape,t.colors]}function gt(t){t.material&&(t.colors=P[t.material].colors),t.makeBits&&(t.bits=t.makeBits(t));let e=t.canvas,n=1;if(e.width=t.size[0]*n,e.height=t.size[1]*n,e.style.transformOrigin=t.origin,e.style.transform=`scale(${t.scale})`,f(e).imageSmoothingEnabled=!1,t.bits)for(let o=0;t.bits[o];o++){let r=t.bits[o];if(!r||!r[0])continue;let l=ut(r[1],r[0]);f(e).drawImage(l,t.bitPos[o][0]*n,t.bitPos[o][1]*n,l.width*n,l.height*n)}}function y(t){t.id??=ue(),t.held=[];let e={canvas:jt(t),floor:0,actionsQueue:[],...t},n=se[e.type];if(n&&(n.placeh&&(e.mountPoint??=[5,0,9-n.placeh*8]),e.shape??=[0,16,80,0,0][e.kind]+n.ind,e.scale??=n.scale),e.scale??=1,gt(e),e.pos&&(x[t.id]=e,Scene.appendChild(e.div),t.className&&e.div.classList.add(t.className),S(e)),!e.aspects)for(let o of[P[e.material],pt[e.type],k[e.type]])e.aspects=Tt(e.aspects,o?.aspects);return e}function N(t){t.div.parentElement?.removeChild(t.div),delete x[t.id]}function W(t,e,n){e.kind==2&&(t.div.appendChild(e.div),t.held.unshift(e),e.parent=t,e.pos=n??re(t.mountPoint,t.scale),S(e))}function zt(t,e){let n=t.held.shift();return n&&(n.pos=e??t.pos,Scene.appendChild(n.div),delete n.parent,S(n)),n}function h(t){return~~(t[0]/m)+d*~~(t[2]/c-1)}function Xt(t){return[t%d*m,0,c*~~(t/d+1)]}function B(t){return b(Xt(t),[m/2,0,0])}function tt(t,e){return{...A,shape:t,colors:e}}function Ae(t,e){e&&(t.colors=e.colors,t.shape=e.shape,t.scale=e.scale),gt(t)}function T(t,e=!0){return e?He(nt(t).pos):nt(t).pos}function nt(t){return t.parent?nt(t.parent):t}function rt(t){let e=h(T(t));return v[e].dream}function Z(t){return Object.values(x).filter(e=>h(T(e))==t)}function Gt(t,e){if(!e)return;if(t.kind!=1)debugger;let n=E[e];return y({...A,shape:ft+n.ind,colors:n.colors,pos:b(t.pos,[0,0,-30]),className:"thought",deadAt:Date.now()+3e3})}function Kt(t){return t.level??Ct(t.aspects)}function Wt(t){if(!t||!Qt(t))return;let e="",n="";return t.kind==1?e=`${t.name} the ${t.type||"X"}`:e=`${t.material||""} ${t.type}`,n+=`Level ${Kt(t)}<br/><br/>`,t.aspects&&(n+=le(t.aspects)),[e,n]}function bn(t){let e=Z(h(t.pos)),n=lt(e.map(o=>{if(o==t||!Qt(o))return 0;let r=st(t.pos,T(o));return Kt(o)/(10+r)*Le(t,o)}));return e[n]}function xn(t,e){let n=X(e.aspects),o=Kt(e)*Le(t,e)*.01;o=ae(o),o&&(t.aspects=Tt({[n]:o},t.aspects),t.recent.unshift(e.id),t.recent.length=20,t==qt&&it(t),Gt(t,n))}function Le(t,e){t.recent??=[];let n=t.recent.indexOf(e.id);return n==-1&&(n=1e6),1-1/(1+n)}function ke(t){if(!gn(t))return;let e=bn(t);!e||w(t,[...M(t,T(e),5),()=>xn(t,e),()=>Zt(1e3)])}function gn(t){return!t.actionsQueue?.length&&!t.animation}function De(t){let e=Ct(t.aspects);if(t.level<e){let n=X(t.aspects);t.aspects[n]=Math.max(0,t.aspects[n]-.01*~~(e-t.level+1))}}function Me(t){return v[h(T(t))].dream}function w(t,e){!t||(t.actionsQueue=e,delete t.animation)}function Ot(t,e=void 0){return Z(t).filter(n=>n.kind==1&&(e===void 0||!n.dream==!e))}function et(t,e){return t.aspects[e]??0}function Nt(t,e){t.title&&(t.title.innerHTML=e)}function Ft(t){Nt(t,`${t.combat?.hp}/${It(t)} hp`)}function Pe(){return X(pt,t=>t.chance)}function $e(t,e){e.type=="Bed"&&yt(t)}var Vt=[],ht=[-100,20],Re=600;function He(t){return[t[0],t[1],Math.ceil(t[2]/c)*c]}function Ie(t,e){Ae(L,t),L.pos=e,Scene.appendChild(L.div),S(L)}function _t(){Scene.style.left=`${ht[0]}px`,Scene.style.top=`${ht[1]}px`}function Xe(){onpointerup=t=>{Vt[t.button]=!1},onpointerdown=t=>{Vt[t.button]=!0;let[e,n,o,r]=Et(t),l=[e,n,r*c],i;if(a&&o=="f"&&!t.shiftKey&&((t.button==2||t.button==0&&!a.held.length)&&(i=M(a,l)),t.button==0&&a.held.length&&(i=[...M(a,l),()=>zt(a)])),a&&o=="s"&&!t.shiftKey){let p=x[r];p&&p!=a&&!rt(p)&&(t.button==2&&(i=[...M(a,T(p),15),()=>$e(a,p)]),t.button==0&&(p.kind==1?q(nt(p)):i=[...M(a,T(p)),()=>{if(a.held.length){let j=zt(a);j&&W(p,j)}else W(a,p)}]))}i&&!rt(a)&&w(a,[...i,()=>Zt(5e3)]),oncontextmenu=p=>{p.shiftKey||p.preventDefault()},t.target.classList.contains("sprite")},onmousemove=t=>{if(Vt[1]){let p=.5;ht=b(ht,[t.movementX,t.movementY],p),_t()}let[e,n,o,r]=Et(t),l=[e,n,r*c],i=a?.held[0],s=x[r];if(it(s),i&&(o=="f"&&Ie(i,l),o=="s"&&s&&s.kind==2)){let p=b(s.pos,[0,0,-xt(s)[1]*.7]);Ie(i,p),s.div.parentElement?.appendChild(L.div)}t.preventDefault()},onwheel=t=>{Re-=t.deltaY*.2,Jt()}}var qt;function Qt(t){return t.kind==2||t.kind==1}function it(t){let e=Wt(t)||Wt(a);qt=t||a,Info.innerHTML=e?`<h1>${e[0]}</h1>${e[1]}`:""}function Jt(){Scene.style.transform=`translateZ(${Re}px)`}function Et(t){let[e,n,o]=[t.target.id,t.offsetX,t.offsetY],r=e[0],l=e.substring(1);return[n,o,r,l]}function Ut(t){return[...t.matchAll(/(\w)(\w)(\w)/g)].map(e=>[...e.slice(1,4).map(n=>~~(Number.parseInt(n,36)/36*100)/100),1])}var Oe="906j05u58zdczpdrfag867240125869i8lp8zu7zi8t94h34724i97wlfzuozzvqrrfjj68a13509d4kngtqzvuzjnq8kd3duzzxxx";var Be="1",Ze="2",je=0;function hn(t){for(let e in t){let n=$(t[e]);console.log(`%c          %c ${Number(e).toString(36)} ${n}`,`color:#00; background:${n}`,"background:#fff")}for(let e in P){let[n,o]=[...P[e].colors].map(r=>C[Number.parseInt(r,36)]);console.log(`%c   %c %c ${e}`,`color:#00; background:${$(n)}`,`color:#00; background:${$(o)}`,"background:#fff")}for(let e of Object.values(E)){let[n,o]=[...e.colors].map(r=>C[Number.parseInt(r,36)]);console.log(`%c   %c %c ${e.name}`,`color:#00; background:${$(n)}`,`color:#00; background:${$(o)}`,"background:#fff")}}function En(){for(let t in C){let e=$(C[t]),n=Number(t).toString(36);Debug.innerHTML+=`<div class=csel id="C${n}" style="background:${e}" oncontextmenu="return false;" >${n}</div>`}}function ze(){hn(C),En();for(let t=0;t<256;t++)Debug.appendChild(ut(0,t))}addEventListener("pointerdown",t=>{let[e,n,o,r]=Et(t);if(o=="f"&&t.button==0&&t.shiftKey){let i=Ye();i.pos=[e,n,r*c],S(i)}o=="O"&&(je=r),o=="C"&&(t.button==0?Be=r:Ze=r),Preview.innerHTML="";let l=Ye();Preview.appendChild(l.canvas)});var Ne="ayhiadream",Fe=0;addEventListener("keydown",t=>{if(t.code=="KeyD"&&Debug.classList.toggle("dn"),t.code=="KeyS"){let e=ce();localStorage.setItem(Ne,JSON.stringify(e))}if(t.code=="KeyL"){let e=localStorage.getItem(Ne);e&&me(JSON.parse(e))}if(t.code=="KeyT"){let e=Z(h(a.pos)),n=R(e);w(a,M(a,T(n),15))}if(t.code=="KeyE"){let e=Object.keys(E)[Fe];Gt(a,e),Fe++}t.code=="KeyN"&&(rt(a)?Ht(h(a.pos)):yt(a))});function Ye(){return y({...A,shape:je,colors:Be+Ze,pos:[0,0,0]})}function Ge(){console.log(E),console.log(P),console.log(k)}function Ke(){let t="";Scene.innerHTML+=t;for(let s of[Back,Front])J(s,m*d,c*O,2);Front.style.transform=`translateZ(${g}px)`,_(Back,H(F("2f",1)));let e=f(Front);e.fillStyle=H(F("2g",1));for(let s=0;s<d;s++)e.fillRect(s*m*2-10,0,20,1e4);for(let s=0;s<O;s++)e.fillRect(0,s*c*2-10,1e4,20);let n=H(F("gf",2)),o=H(F("rq",1));for(let s=0;s<=d;s++){let p=dt(`w${s}`,"wall",{left:`${s*m}px`});J(p,g,c*O,2),_(p,n)}for(let s=0;s<=O;s++){let p=dt(`f${s}`,"floor",{top:`${s*c}px`});J(p,m*d,g,2),_(p,o)}for(let s=0;s<At;s++)y({...ot,shape:80,colors:"ef",type:"Door",level:s,scale:2,pos:B(s)});let r=he(0),l=V(m+g,g);_(r,H(F("ba",9)));let i=Ee(ye("45",11),16);f(r).fillStyle=H(i),f(r).globalAlpha=.5,f(r).fillRect(0,0,r.width,r.height),r.style.background="#000"}var C=Ut(Oe),Dt=new Set,xr,We,vn,L,Qe,a,x={};onload=()=>{img.onload=Sn,img.src="16cols.gif"};function q(t){if(!t)return;let e=a;a=t,U(e),U(a),a.div.appendChild(Qe.div)}function Sn(){Ke(),ze(),Jt(),Xe(),_t(),We=y({...Y,level:1,shape:18,colors:"nm",type:"Cat",name:z(),chest:tt(Q+2,"lk"),pos:[20,10,c]}),vn=y({...Y,level:1,shape:26,colors:"qp",type:"Dog",name:z(),chest:tt(Q+1,"ba"),pos:[40,10,c]}),L=y({...A,opacity:.5,shape:1,colors:"ab",pos:[0,0,0],noclick:!0}),L.canvas.classList.add("phantom");for(let t=0;t<30;t++){let e=k[X(k,n=>n.chance)];y({...Bt,kind:2,type:e.name,material:u(2)?R(Object.keys(P)):e.material,pos:[u(d)*m+10+u(m-20),u(g),c]})}Qe=y({...A,shape:8,colors:"ab",pos:[8,0,4],className:"pointer"}),q(We),Ve(0),it(),Ge()}var qe=0,te=0;function Ve(t){let e=t-qe||1;qe=t;let n=Date.now();te=te*.9+1e3/e*.1,FPS.innerText=`FPS: ${~~te}`,Object.values(x).forEach(o=>{(o.actionsQueue.length||o.animation)&&S(o),o.deadAt&&n>o.deadAt&&N(o),o.kind==1&&(Me(o)||e>u()*3e3&&(De(o),ke(o))),document.querySelectorAll(".aspect").forEach(r=>{let l=E[r?.dataset?.aspect];if(!l)return;delete r?.dataset?.aspect;let i=jt({...A,shape:ft+l.ind,colors:l.colors});r.prepend(i)})}),requestAnimationFrame(Ve),a?.held.length||(L.div.style.opacity="0")}})();
//# sourceMappingURL=bundle.js.map
